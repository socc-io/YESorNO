<html>
<head>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
<style>
.box{
	border: 1px solid;
	width: 300px;
	height: 500px;
}
</style>
</head>



<body>
  <div id="1" class="box">
  </div>
  <div id="2" class="box">
  </div>
  <div id="3" class="box">
  </div>

<script>
console.log("\n#dp 방에서 2명이 물어보고 대답하는 시나리오\n");
var bexer = io.connect('beaver.hp100.net',{port:3000});
var yong = io.connect('beaver.hp100.net',{port:3000});
var master_dp = io.connect('beaver.hp100.net',{port:3000});

bexer.emit('login',{chat_room_key : 'dpdp', chat_member_id : 'bexer'});
yong.emit('login',{chat_room_key : 'dpdp', chat_member_id : 'yong'});
master_dp.emit('login',{chat_room_key : 'dpdp', chat_member_id : 'master_dp'});

//채팅 보내기
yong.emit('send',{chat_room_key : 'dpdp', chat_member_id : 'yong', chat_type:'default', chat_text:'숫자가 10보다 큰가요?'});
master_dp.emit('send',{chat_room_key : 'dpdp', chat_member_id : 'master_dp', chat_type:'notice', chat_text:'YES'});
bexer.emit('send',{chat_room_key : 'dpdp', chat_member_id : 'bexer', chat_type:'default', chat_text:'숫자가 20보다 큰가요?'});
master_dp.emit('send',{chat_room_key : 'dpdp', chat_member_id : 'master_dp', chat_type:'notice', chat_text:'NO'});

var text;
//채팅 받기
bexer.on('broadcast',function(data){
	text = "";
	for(i in data.chat_history) text += (data.chat_history[i].chat_text)+'<br>'; 
	console.log(text);	
$('#1').html(text);
});
yong.on('broadcast',function(data){
	var text = "";
	for(i in data.chat_history) text += data.chat_history[i].chat_text; 
});

master_dp.on('broadcast',function(data){
	var text = "";
	for(i in data.chat_history) text += data.chat_history[i].chat_text; 
});

// console.log("\n#방을 하나 더 생성해서 여러명이 물어보고 대답하는 시나리오\n");

// var bexer1 : io('beaver.hp100.net',{port:3000});
// var yong1 : io('beaver.hp100.net',{port:3000});
// var master-dp1 : io('beaver.hp100.net',{port:3000});

// bexer1.on('login',{chat_room_key : 'dpdp1', chat_member_id : 'bexer1'});
// yong1.on('login',{chat_room_key : 'dpdp1', chat_member_id : 'yong1'});
// master_dp1.on('login',{chat_room_key : 'dpdp1', chat_member_id : 'master_dp1'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='계속 말하기'});
// yong1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'yong1', chat_type:'default', chat_text='동시 말하기'});
// bexer1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'bexer1', chat_type:'default', chat_text='동시 말하기'});
// master_dp1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'master_dp1', chat_type:'notice', chat_text='YES'});
// master_dp1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'master_dp1', chat_type:'notice', chat_text='YES'});
// bexer1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'bexer1', chat_type:'default', chat_text='숫자가 20보다 큰가요?'});
// master_dp1.on('send',{chat_room_key : 'dpdp1', chat_member_id : 'master_dp1', chat_type:'notice', chat_text='NO'});
</script>
</body>
</html>
